#!/usr/bin/env python3
"""
é˜¶è·ƒæ˜Ÿè¾°æ™ºèƒ½åŠ©æ‰‹ - ç”¨äºå®Œå–„ MedRoundTable åŠŸèƒ½
"""

import sys
sys.path.insert(0, '/root/.openclaw/workspace/tools')
from stepfun_cli import call_stepfun

def generate_research_workflow():
    """ç”Ÿæˆå®Œæ•´çš„ç§‘ç ”åä½œå·¥ä½œæµ"""
    prompt = """ä½œä¸ºåŒ»å­¦ç§‘ç ”ä¸“å®¶ï¼Œè¯·ä¸º MedRoundTable å¹³å°è®¾è®¡ä¸€ä¸ªå®Œæ•´çš„ä¸´åºŠç§‘ç ”å·¥ä½œæµã€‚

è¦æ±‚ï¼š
1. åŒ…å«ä»ä¸´åºŠé—®é¢˜åˆ°è®ºæ–‡å‘è¡¨çš„å®Œæ•´æµç¨‹
2. æ¯ä¸ªæ­¥éª¤è¯´æ˜5ä¸ªAgentï¼ˆä¸´åºŠä¸»ä»»ã€åšå£«ç”Ÿã€æµè¡Œç—…å­¦å®¶ã€ç»Ÿè®¡ä¸“å®¶ã€ç ”ç©¶æŠ¤å£«ï¼‰çš„å…·ä½“èŒè´£
3. è¾“å‡ºJSONæ ¼å¼ï¼Œä¾¿äºç¨‹åºå¤„ç†

è¾“å‡ºæ ¼å¼ç¤ºä¾‹ï¼š
{
  "workflow": [
    {
      "stage": "é˜¶æ®µåç§°",
      "description": "é˜¶æ®µæè¿°",
      "agents_involved": ["agent_id"],
      "tasks": ["ä»»åŠ¡1", "ä»»åŠ¡2"],
      "deliverables": ["äº¤ä»˜ç‰©1", "äº¤ä»˜ç‰©2"],
      "duration": "é¢„è®¡æ—¶é•¿"
    }
  ]
}"""
    return call_stepfun(prompt, model="step-1-200k")

def generate_agent_prompts():
    """ç”Ÿæˆ5ä¸ªAgentçš„ä¸“ä¸šæç¤ºè¯"""
    prompt = """è¯·ä¸º MedRoundTable çš„5ä¸ªAI Agentç”Ÿæˆä¸“ä¸šçš„ç³»ç»Ÿæç¤ºè¯ï¼ˆSystem Promptsï¼‰ï¼š

1. èµ„æ·±ä¸´åºŠä¸»ä»» - éœ€è¦ä½“ç°æƒå¨æ€§ã€ä¸°å¯Œçš„ä¸´åºŠç»éªŒã€ç§‘ç ”åˆ¤æ–­åŠ›
2. ä¸´åºŠåšå£«ç”Ÿ - éœ€è¦ä½“ç°æ–‡çŒ®æ£€ç´¢èƒ½åŠ›ã€å­¦æœ¯è§„èŒƒã€åè°ƒèƒ½åŠ›
3. ä¸´åºŠæµè¡Œç—…å­¦å®¶ - éœ€è¦ä½“ç°ç ”ç©¶è®¾è®¡ä¸“ä¸šæ€§ã€æ–¹æ³•å­¦ä¸¥è°¨
4. æ•°æ®ç»Ÿè®¡ä¸“å®¶ - éœ€è¦ä½“ç°ç»Ÿè®¡å­¦ä¸“ä¸šæ€§ã€æ•°æ®æ•æ„Ÿ
5. ç ”ç©¶æŠ¤å£« - éœ€è¦ä½“ç°æ‰§è¡ŒåŠ›ã€è´¨é‡æ§åˆ¶æ„è¯†ã€æ“ä½œè§„èŒƒ

æ¯ä¸ªæç¤ºè¯éœ€è¦ï¼š
- å®šä¹‰è§’è‰²èº«ä»½å’Œä¸“ä¸šèƒŒæ™¯
- æ˜ç¡®èŒè´£èŒƒå›´
- è§„å®šè¾“å‡ºæ ¼å¼å’Œé£æ ¼
- åŒ…å«ä¸“ä¸šçŸ¥è¯†åº“æç¤º

è¾“å‡ºJSONæ ¼å¼ï¼š
{
  "clinical_director": "æç¤ºè¯å†…å®¹...",
  "phd_student": "æç¤ºè¯å†…å®¹...",
  ...
}"""
    return call_stepfun(prompt, model="step-1-200k")

def generate_user_guide():
    """ç”Ÿæˆç”¨æˆ·æŒ‡å—"""
    prompt = """è¯·ä¸º MedRoundTable åŒ»å­¦ç§‘ç ”åä½œå¹³å°ç¼–å†™ä¸€ä»½è¯¦ç»†çš„ç”¨æˆ·æŒ‡å—ã€‚

ç›®æ ‡ç”¨æˆ·ï¼šä¸´åºŠåŒ»ç”Ÿã€åŒ»å­¦ç”Ÿã€ç§‘ç ”äººå‘˜

æŒ‡å—éœ€è¦åŒ…å«ï¼š
1. å¿«é€Ÿå…¥é—¨ï¼ˆ5åˆ†é’Ÿä¸Šæ‰‹ï¼‰
2. å¦‚ä½•å‘èµ·ä¸€ä¸ªåœ†æ¡Œè®¨è®º
3. 5ä¸ªAgentçš„åŠŸèƒ½ä»‹ç»å’Œä½¿ç”¨åœºæ™¯
4. å¦‚ä½•å¯¼å‡ºç ”ç©¶æˆæœ
5. å¸¸è§é—®é¢˜è§£ç­”
6. æœ€ä½³å®è·µæ¡ˆä¾‹

è¦æ±‚ï¼š
- è¯­è¨€é€šä¿—æ˜“æ‡‚
- åŒ…å«å…·ä½“æ“ä½œæ­¥éª¤
- æä¾›å®é™…æ¡ˆä¾‹è¯´æ˜
- æ ¼å¼æ¸…æ™°ï¼Œä¾¿äºé˜…è¯»

è¾“å‡ºMarkdownæ ¼å¼ã€‚"""
    return call_stepfun(prompt, model="step-1-200k")

if __name__ == "__main__":
    print("ğŸš€ ä½¿ç”¨é˜¶è·ƒæ˜Ÿè¾°å®Œå–„ MedRoundTable...")
    print("=" * 50)
    
    # æµ‹è¯•è¿æ¥
    print("\n1. æµ‹è¯•é˜¶è·ƒæ˜Ÿè¾°è¿æ¥...")
    result = call_stepfun("ä½ å¥½ï¼Œè¯·ç¡®è®¤ä½ å·²å°±ç»ª", model="step-1-32k")
    print(f"âœ… é˜¶è·ƒæ˜Ÿè¾°: {result[:100]}...")
    
    print("\n2. ç”Ÿæˆç§‘ç ”å·¥ä½œæµ...")
    workflow = generate_research_workflow()
    print(f"âœ… å·¥ä½œæµå·²ç”Ÿæˆ: {len(workflow)} å­—ç¬¦")
    
    print("\n3. ç”ŸæˆAgentæç¤ºè¯...")
    prompts = generate_agent_prompts()
    print(f"âœ… æç¤ºè¯å·²ç”Ÿæˆ: {len(prompts)} å­—ç¬¦")
    
    print("\n4. ç”Ÿæˆç”¨æˆ·æŒ‡å—...")
    guide = generate_user_guide()
    print(f"âœ… ç”¨æˆ·æŒ‡å—å·²ç”Ÿæˆ: {len(guide)} å­—ç¬¦")
    
    print("\n" + "=" * 50)
    print("âœ¨ æ‰€æœ‰å†…å®¹å·²ç”Ÿæˆå®Œæˆï¼")
